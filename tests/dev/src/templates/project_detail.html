{% extends "base.html" %}
{% block title %}{{ project.name | safe }}{% endblock %}
{% block content %}
<h3>{{ project.name | safe }}</h3>
<p class="text-muted">{{ project.description or "No description yet." }}</p>
<p class="text-muted">🕒 Created: {{ project.created_at|format_timestamp }}</p> 
<a href="/chat/new?project_id={{ project.idproject }}" class="btn btn-success mb-3">+ New Chat in this Project</a>

<!-- Add new chat to project -->
<form method="POST" action="/projects/{{ project.idproject }}/new_chat">
  <button type="submit" class="btn btn-outline-success btn-sm mb-3">
      + New Chat in this Project
  </button>
</form>


{% if chats %}
  <ul class="list-group list-group-flush">
    {% for chat in chats %}
      <li class="list-group-item bg-dark text-white d-flex justify-content-between align-items-center">
        <a href="/chat/{{ chat.idchat }}" class="text-light text-decoration-none">
          {{ (chat.name or "Untitled Chat") | safe }}
        </a>
        <small class="text-muted">{{ chat.created_at | format_timestamp }}</small>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="text-muted">No chats in this project yet.</p>
{% endif %}

<a href="/projects" class="btn btn-outline-secondary mt-4">← Back to All Projects</a>
{% endblock %}
